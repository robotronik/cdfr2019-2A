ARM GAS  /tmp/ccTfveHP.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"encoder.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.init_encoder,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	init_encoder
  21              		.arch armv7e-m
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  25              		.fpu fpv4-sp-d16
  27              	init_encoder:
  28              	.LVL0:
  29              	.LFB695:
  30              		.file 1 "Src/encoder.c"
   1:Src/encoder.c **** #include "encoder.h"
   2:Src/encoder.c **** 
   3:Src/encoder.c **** #if TEST_ENCODER != 0
   4:Src/encoder.c **** uint8_t led_level;
   5:Src/encoder.c **** #endif
   6:Src/encoder.c **** 
   7:Src/encoder.c **** void init_encoder(Encoder *encoder, TIM_HandleTypeDef *htim){
  31              		.loc 1 7 61 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		@ link register save eliminated.
   8:Src/encoder.c ****   encoder->last_pos = encoder->steps = 0;
  36              		.loc 1 8 3 view .LVU1
  37              		.loc 1 8 38 is_stmt 0 view .LVU2
  38 0000 0023     		movs	r3, #0
  39 0002 4360     		str	r3, [r0, #4]
   9:Src/encoder.c ****   encoder->htim = htim;
  40              		.loc 1 9 17 view .LVU3
  41 0004 8160     		str	r1, [r0, #8]
   8:Src/encoder.c ****   encoder->last_pos = encoder->steps = 0;
  42              		.loc 1 8 21 view .LVU4
  43 0006 0360     		str	r3, [r0]
  44              		.loc 1 9 3 is_stmt 1 view .LVU5
  10:Src/encoder.c **** }
  45              		.loc 1 10 1 is_stmt 0 view .LVU6
  46 0008 7047     		bx	lr
  47              		.cfi_endproc
ARM GAS  /tmp/ccTfveHP.s 			page 2


  48              	.LFE695:
  50 000a 00BF     		.section	.text.update_encoder,"ax",%progbits
  51              		.align	1
  52              		.p2align 2,,3
  53              		.global	update_encoder
  54              		.syntax unified
  55              		.thumb
  56              		.thumb_func
  57              		.fpu fpv4-sp-d16
  59              	update_encoder:
  60              	.LVL1:
  61              	.LFB696:
  11:Src/encoder.c **** 
  12:Src/encoder.c **** int update_encoder(Encoder *encoder){
  62              		.loc 1 12 37 is_stmt 1 view -0
  63              		.cfi_startproc
  64              		@ args = 0, pretend = 0, frame = 0
  65              		@ frame_needed = 0, uses_anonymous_args = 0
  66              		@ link register save eliminated.
  13:Src/encoder.c ****   const int cnt = encoder->htim->Instance->CNT;
  67              		.loc 1 13 3 view .LVU8
  68              		.loc 1 13 32 is_stmt 0 view .LVU9
  69 0000 8368     		ldr	r3, [r0, #8]
  70 0002 1B68     		ldr	r3, [r3]
  71              		.loc 1 13 42 view .LVU10
  72 0004 5B6A     		ldr	r3, [r3, #36]
  73              	.LVL2:
  14:Src/encoder.c **** 
  15:Src/encoder.c ****   int dl = cnt - encoder->last_pos;
  74              		.loc 1 15 3 is_stmt 1 view .LVU11
  75              		.loc 1 15 25 is_stmt 0 view .LVU12
  76 0006 0268     		ldr	r2, [r0]
  16:Src/encoder.c ****   encoder->last_pos = cnt;
  77              		.loc 1 16 21 view .LVU13
  78 0008 0360     		str	r3, [r0]
  15:Src/encoder.c ****   encoder->last_pos = cnt;
  79              		.loc 1 15 7 view .LVU14
  80 000a 9B1A     		subs	r3, r3, r2
  81              	.LVL3:
  82              		.loc 1 16 3 is_stmt 1 view .LVU15
  17:Src/encoder.c ****   if(dl > 1){
  83              		.loc 1 17 3 view .LVU16
  84              		.loc 1 17 5 is_stmt 0 view .LVU17
  85 000c 012B     		cmp	r3, #1
  86 000e 07DC     		bgt	.L5
  18:Src/encoder.c ****     dl = -1;
  19:Src/encoder.c ****   }else if(dl < -1){
  87              		.loc 1 19 9 is_stmt 1 view .LVU18
  20:Src/encoder.c ****     dl = +1;
  88              		.loc 1 20 8 is_stmt 0 view .LVU19
  89 0010 9A1C     		adds	r2, r3, #2
  90 0012 D8BF     		it	le
  91 0014 0123     		movle	r3, #1
  92              	.LVL4:
  93              	.L4:
  21:Src/encoder.c ****   }
  22:Src/encoder.c ****   
ARM GAS  /tmp/ccTfveHP.s 			page 3


  23:Src/encoder.c ****   encoder->steps += dl;
  94              		.loc 1 23 3 is_stmt 1 view .LVU20
  95              		.loc 1 23 18 is_stmt 0 view .LVU21
  96 0016 4268     		ldr	r2, [r0, #4]
  97 0018 1A44     		add	r2, r2, r3
  98 001a 4260     		str	r2, [r0, #4]
  99              	.LVL5:
  24:Src/encoder.c **** 
  25:Src/encoder.c ****   return dl;
 100              		.loc 1 25 3 is_stmt 1 view .LVU22
  26:Src/encoder.c **** }
 101              		.loc 1 26 1 is_stmt 0 view .LVU23
 102 001c 1846     		mov	r0, r3
 103              	.LVL6:
 104              		.loc 1 26 1 view .LVU24
 105 001e 7047     		bx	lr
 106              	.LVL7:
 107              	.L5:
  18:Src/encoder.c ****   }else if(dl < -1){
 108              		.loc 1 18 8 view .LVU25
 109 0020 4FF0FF33 		mov	r3, #-1
 110              	.LVL8:
  18:Src/encoder.c ****   }else if(dl < -1){
 111              		.loc 1 18 8 view .LVU26
 112 0024 F7E7     		b	.L4
 113              		.cfi_endproc
 114              	.LFE696:
 116 0026 00BF     		.section	.text.start_encoder,"ax",%progbits
 117              		.align	1
 118              		.p2align 2,,3
 119              		.global	start_encoder
 120              		.syntax unified
 121              		.thumb
 122              		.thumb_func
 123              		.fpu fpv4-sp-d16
 125              	start_encoder:
 126              	.LVL9:
 127              	.LFB697:
  27:Src/encoder.c **** 
  28:Src/encoder.c **** void start_encoder(Encoder *encoder){
 128              		.loc 1 28 37 is_stmt 1 view -0
 129              		.cfi_startproc
 130              		@ args = 0, pretend = 0, frame = 0
 131              		@ frame_needed = 0, uses_anonymous_args = 0
 132              		@ link register save eliminated.
  29:Src/encoder.c ****   HAL_TIM_Encoder_Start(encoder->htim, TIM_CHANNEL_ALL);
 133              		.loc 1 29 3 view .LVU28
 134 0000 8068     		ldr	r0, [r0, #8]
 135              	.LVL10:
 136              		.loc 1 29 3 is_stmt 0 view .LVU29
 137 0002 3C21     		movs	r1, #60
 138 0004 FFF7FEBF 		b	HAL_TIM_Encoder_Start
 139              	.LVL11:
 140              		.cfi_endproc
 141              	.LFE697:
 143              		.text
 144              	.Letext0:
ARM GAS  /tmp/ccTfveHP.s 			page 4


 145              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 146              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 147              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 148              		.file 5 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/system_stm32f3xx.h"
 149              		.file 6 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303x8.h"
 150              		.file 7 "/usr/arm-none-eabi/include/sys/lock.h"
 151              		.file 8 "/usr/arm-none-eabi/include/sys/_types.h"
 152              		.file 9 "/usr/lib/gcc/arm-none-eabi/8.2.0/include/stddef.h"
 153              		.file 10 "/usr/arm-none-eabi/include/sys/reent.h"
 154              		.file 11 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 155              		.file 12 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 156              		.file 13 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_tim.h"
 157              		.file 14 "Inc/encoder.h"
 158              		.file 15 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_ll_dma.h"
ARM GAS  /tmp/ccTfveHP.s 			page 5


DEFINED SYMBOLS
                            *ABS*:0000000000000000 encoder.c
     /tmp/ccTfveHP.s:18     .text.init_encoder:0000000000000000 $t
     /tmp/ccTfveHP.s:27     .text.init_encoder:0000000000000000 init_encoder
     /tmp/ccTfveHP.s:51     .text.update_encoder:0000000000000000 $t
     /tmp/ccTfveHP.s:59     .text.update_encoder:0000000000000000 update_encoder
     /tmp/ccTfveHP.s:117    .text.start_encoder:0000000000000000 $t
     /tmp/ccTfveHP.s:125    .text.start_encoder:0000000000000000 start_encoder

UNDEFINED SYMBOLS
HAL_TIM_Encoder_Start
